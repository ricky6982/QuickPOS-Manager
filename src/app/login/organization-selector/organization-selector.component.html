<div class="min-h-screen">
  <mat-card class="card-container">
    <mat-card-header>
      <div class="header-content">
        <h1 class="header-title">
          Selecciona una Organización
        </h1>
        <p class="header-subtitle">Elige la organización con la que deseas trabajar</p>
      </div>
    </mat-card-header>

    <mat-card-content>
      @if (error()) {
        <div class="error-container">
          <mat-icon class="error-icon">error</mat-icon>
          {{ error() }}
        </div>
      }

      <div class="organizations-grid">
        @for (org of organizations(); track org.id) {
          <div
            class="org-card"
            [class.selected]="selectedOrg()?.id === org.id"
            [class.disabled]="loading()"
            (click)="!loading() && selectOrganization(org)">
            <div class="org-card-content">
              <div class="org-info">
                <div class="org-name">
                  {{ org.name }}
                </div>
                <div class="org-roles">
                  @for (role of org.roles; track role) {
                    <mat-chip-option class="role-chip">{{ role }}</mat-chip-option>
                  }
                </div>
              </div>
              @if (loading() && selectedOrg()?.id === org.id) {
                <mat-spinner diameter="24"></mat-spinner>
              } @else {
                <mat-icon class="org-arrow">arrow_forward</mat-icon>
              }
            </div>
          </div>
        }
      </div>

      @if (organizations().length === 0) {
        <div class="empty-state">
          <mat-icon class="empty-icon">business</mat-icon>
          <p>No tienes organizaciones asignadas</p>
        </div>
      }
    </mat-card-content>

    <mat-card-actions class="card-actions">
      <button mat-stroked-button color="accent" (click)="logout()" [disabled]="loading()">
        <mat-icon>logout</mat-icon>
        Cerrar Sesión
      </button>
    </mat-card-actions>
  </mat-card>
</div>

